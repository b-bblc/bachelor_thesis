И.А. Коськин  
Магистрант  
Учебно-научно-исследовательский институт информационных технологий  
Приокский государственный университет г. Орёл, Российская Федерация  
МОДЕЛИРОВАНИЕ ПРОЦЕССА ОЦЕНКИ СИТУАЦИИ ПРИ ПРИНЯТИИ РЕШЕНИЙ В  
КОЛЛЕКЦИОННЫХ КАРТОЧНЫХ ИГРАХ  
Аннотация  
В статье рассматриваются вопросы моделирования взаимодействия игровых объектов
в классических и коллекционных карточных играх. Рассматриваются простой и
расширенный методы динамического моделирования. Описывается специфический
метод кластеризации игровых объектов, построены оценочные кривые стоимости для
различных игровых ситуаций. Материал может быть полезен при разработке игровых
компьютерных роботов.  
Ключевые слова  
Оценка игровой ситуации, карточные игры, моделирование, динамический метод,
кластеризация.  
Компьютерные игроки (роботы) сейчас являются неотъемлемой частью большинства
игр. Высокую популярность за последние годы набрали коллекционные карточные
игры (и их компьютерные реализации), в которых человек играет против другого
человека. Но зачастую по разным причинам игроку требуется, чтобы его
противником был компьютер. Это может быть в случае, когда у человека нет
достаточно скоростного и стабильного интернета, в случае, когда игроку-новичку
необходимо лучше освоить игру и другие игроки для него слишком сильные
соперники или в случае, если игроку-профессионалу не хочется показывать новые
тактики и стратегии перед соревнованиями. В этом случае необходимы
компьютерные игроки разного уровня. Очевидно, что такие роботы должны будут
действовать (и, возможно, имитировать поведение человека) на основе некоторых алгоритмов. Важнейшим элементом
подобных алгоритмов являются механизмы принятия решений. Для успешной работы
подобных механизмов необходимо каким-то образом оценивать эффективность карт.  
Для оценки полезности карт в зависимости от ситуации можно использовать
различные методы. Первый из них - метод статической оценки, который использует
заранее прописанные оценки для каждой из карт. Он прост в реализации, хотя и
не быстр - потребуется как минимум поверхностный анализ удельной стоимости
карт друг относительно друга. Этот метод позволит создать робота, который
сможет принимать не всегда бестолковые решения. Если обозначить начальную
относительную ценность карты X за Vхо, то, в данном методе ценность карты Vх
будет равна начальной.  
Метод можно улучшить, применив дополнительные факторы. Например, это может
быть синергия карт, относительная эффективность свойств карт и т.д. Кроме
того, при построении колоды можно учитывать кривую стоимости, чтобы при сборе
колоды не допустить стоимостной просадки одной из стадий игры. Метод
расширенной статической оценки не рассматривает ситуацию на столе, вероятность
появления других карт из заранее известной своей колоды в руке и шанса их
успешно разыграть, а так же положения дел в руке соперника. Обозначив за Их
величину влияния одной из карт на данную, ценность карты X будет
рассчитываться как Vх = Vхо + EИх.  
Простая динамическая оценка является расширением статических оценок. Ценность
(или полезность) карты рассчитывается исходя не только из ее характеристик, но
и из текущей ситуации на столе и в руке. Здесь уже будут играть большую роль
дополнительные характеристики карт и их возможность повлиять именно на текущую
ситуацию, а не на ситуацию в общем случае. Вероятность повышения/понижения
эффективности с течением времени за счет сложных событий и другие, более
сложные вероятностные параметры, на данном этапе не рассматриваются.
Разыгрываться будет карта с максимальным ожидаемым эффектом с течением времени
исходя из однозначно известной вероятностной модели без учёта неизвестной руки
и колоды соперника. Обозначив за Vхк ценность карты после взаимодействия карты
с к-ой картой из рассматриваемого набора, получим, что ценность Vх = Vхо + EИх
+ Eр(Uх)(Vхк+1 - Vхк) (1).  
Учет вероятности разыгрывания противником некоторых карт и других
вероятностных параметров значительно усложнит ситуацию, но позволит применять
практически полный - расширенный динамический анализ [1].  
На рисунке 1 представлена общая модель оценки игровой ситуации, описанная в
статье.  
[Рисунок 1 - Общая модель оценки игровой ситуации] 
В данном случае применены следующие обозначения:  
Hopp - руки оппонента;  
Анорр - количество карт в руке оппонента;  
Dopp - колода оппонента;  
Adopp - количество карт в колоде оппонента;  
Topp - «стол» (ситуация на игровом поле) соперника;  
ATopp - количество карт на «столе» соперника;  
Hp - руки игрока; Ahp - количество карт в руке игрока;  
Dp - колода игрока;  
ADp - количество карт в колоде игрока;  
Tp - «стол» игрока;  
Atp - количество карт на «столе» игрока.  
Эта модель позволяет в целом описать взаимодействие игровых объектов в данном
классе игр (классические и коллекционные карточные игры).  
В расширенном динамическом методе для расчета «ценности» карты применялась
следующая формула: [формула],
где Vx - итоговая ценность карты X; Vx0 - начальная (экспертная) оценка карты
X;  Ux - возможность увеличения ценности карты X за счет известных карт, имеющихся
в руке; p(Ux) - вероятность получить карты, увеличивающие ценность карты X на
последующих ходах; pgx - вероятность того, что на последующих ходах соперник
разыграет карты, снижающие ценность карты X;  
(Vxk+1 - Vxk) - разница ценностей до и после увеличения или снижения ценности.  
[формула](3)  
Значение pgh представляет в данной формуле особый интерес, и рассчитывается по
следующей формуле:  
где phgx - вероятность того, что соперник разыграет одну из карт у него в
руке; pdgx - вероятность того, что соперник разыграет одну из карт, которые он
возьмет из колоды; N - количество карт, которые игрок берет за 1 ход. [1]  
Данный метод описывает суть поставленной проблемы - формального расчета оценки
того или иного решения, принимаемого по ходу игры без построения большого
игрового дерева. Вместо того чтобы строить полное игровое дерево (или его
часть), предлагается рассчитывать значения, получаемые с помощью минимаксного
или других аналогичных алгоритмов, формально.  
Для этого используем метод кластеризации игровых объектов, входящих в
предметную область конкретной задачи. За «действие» возьмем происхождение
одного из событий, входящих в один или несколько кластеров (в конкретном
примере карточной игры - разыгрывание игроком карты). Разделение по кластерам
в данном случае станет подготовительным этапом для применения алгоритма
принятия решений на основе расчета вероятности происхождения событий.  
Предположим, что всё множество игровых объектов разбивается на некоторое
конечное число групп (кластеров), объединенных каким-либо общим признаком.
Этим признаком в различных задачах может служить практически всё, что угодно и
выбор эффективных с точки зрения применения параметров кластеризации не всегда
будет являться тривиальной задачей. Например, при кластеризации объектов
коллекционной карточной игры можно выделить «лёгкие» карты - таких карт можно
разыграть сразу несколько, но каждая из них по отдельности обладает небольшими
характеристиками, и карты, которые могут эффективно противодействовать
большому числу лёгких карт. Также можно выделить «тяжелые» карты - обладающие
высокими «личными» характеристиками, но при этом высокой стоимостью, и карты
им противодействующие («точечные») и так далее. При этом стоит заметить, что
применение против «лёгкой» карты карт, противодействующих тяжелым - не будет
эффективным, так как:  
1) за свою стоимость «точечная» карта сможет избавиться только от одной
«лёгкой» карты противника, а у него их, как правило, будет более одной;  
2) использование «точечной» карты против «лёгкой» не позволит в дальнейшем
использовать ее против «тяжелой».  
Таким образом, выделив некоторое число кластеров и описав их взаимодействие
друг с другом, можно рассчитать оценку той или иной карты.  
Предположим, что вся предметная область (набор игровых объектов) разбивается
на конечное число C кластеров. Так как влияние карт из одного кластера на
карты из другого не будет симметричным (т.е. карты  
из кластера А будут изменять оценку карт из кластера Б не так, как карты из
кластера Б будут изменять оценку карт из кластера А), для числового описания
данных взаимодействий потребуется ввести матрицу F (от английского Factor -
коэффициент), размерностью C*C, где в каждой ячейке матрицы будет храниться
величина, на которую будет изменена оценка карты.  
Далее необходимо оценить, с какой вероятностью в игре появится карта из того
или иного кластера. Попробуем предсказать, какое число карт каждого из
кластеров находится в колоде соперника. Для этого будем использовать следующую
методику:  
1) Статистика. Сбор статистики позволит оценить, что сейчас является
популярным среди игроков. Выяснив достоверную информацию о значительном числе
колод, можно по нескольким типичным признакам сделать вывод о том, какая
именно колода сейчас находится у противника, и, соответственно, с учетом
допущений о внесенных им туда поправках, сделать вывод, какие именно карты нас
ждут в этом «чёрном ящике»;  
2) Оценка предметной области. Для коллекционной карточной игры:  
а) Оценка правил формирования колоды. В некоторых играх заведомо требуется
определенное число карт определенного вида для игры;  
б) Оценка «кривой стоимости». В зависимости от класса колоды (быстрая и
агрессивная, медленная и рассчитанная на контроль игры противника,
сбалансированная и т.п.) можно сделать достаточно точное предсказание о том,
какие классы карт будут появляться у противника в дальнейшем [1].  
На рисунке 2 приведены приблизительные кривые стоимости разных типов колод.  
Стоимость  
Рисунок 2 - Кривые стоимости для различных типов колод  
Например, если очевидно, что соперник играет быстрой колодой, то для получения
высоких шансов на успех необходимо удержать под контролем начальную агрессию
оппонента. При этом вскоре он, скорее всего, останется без карт в руке, что не
позволит ему выиграть игру. Соответственно, в таком случае необходимо любой
ценой защититься от начальной агрессии соперника, практически выбросив из
головы то, что, возможно, придется оставить какие-то карты на контроль игры в
поздней стадии. Так как у соперника может в принципе не оказаться «тяжелых»
карт в колоде - на поздней стадии навязать свою игру более тяжёлой колодой не
составит труда.  
Таким образом, путем не самых простых, но выполнимых операций в итоге можно
получить числовое выражение вероятности происхождения события из того или
иного кластера в текущий момент игры.  
Список использованной литературы: 1. Коськин И.А. Искусственный интеллект в
компьютерных играх // SmartГГ: Сборник трудов Международного конкурса научных
работ студентов, с.81-84, [Текст] - Орел: Госуниверситет-УНПК, 2014. - 251с.
1.  
© Коськин И.А., 2016  

